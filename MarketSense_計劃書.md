# 🚀 MarketSense AI - 社群洞察到內容生成自動化平台

## 計劃書 v1.0

> **願景**：一鍵從社群數據挖掘到行銷文案生成的全自動化 AI SaaS 平台

---

## 📋 目錄

1. [專案背景](#1-專案背景)
2. [執行流程回顧](#2-執行流程回顧)
3. [系統架構設計](#3-系統架構設計)
4. [自動化方案比較](#4-自動化方案比較)
5. [技術實現規劃](#5-技術實現規劃)
6. [產品功能規劃](#6-產品功能規劃)
7. [商業模式](#7-商業模式)
8. [開發時程](#8-開發時程)

---

## 1. 專案背景

### 1.1 問題陳述

行銷團隊在進行社群內容策略時面臨以下痛點：

| 痛點 | 傳統做法 | 耗時 |
|------|----------|------|
| 市場調研 | 手動瀏覽論壇、社群 | 3-5 天 |
| 數據整理 | Excel 統計、人工分類 | 1-2 天 |
| 洞察分析 | 主管討論、腦力激盪 | 1-2 天 |
| 文案撰寫 | 文案人員逐篇撰寫 | 5-7 天 |
| **總計** | | **10-16 天** |

### 1.2 解決方案

**MarketSense AI** 將上述流程自動化：

```
輸入產品名稱 → 自動爬蟲 → AI 分析 → 生成 100 篇文案
                        ↓
                    總耗時：< 30 分鐘
```

### 1.3 實證案例：充電小世界

我們剛完成的「充電小世界」專案證明了此流程的可行性：

- **爬取來源**：Dcard
- **關鍵字數量**：7 個
- **文章數據**：18,719 篇
- **熱門文章**：27 篇深度分析
- **產出內容**：100 篇 IG 貼文 + 圖片建議
- **實際耗時**：約 2 小時（含人工審核）

---

## 2. 執行流程回顧

### 2.1 Phase 1：爬蟲資料收集

```
┌─────────────────────────────────────────────────────┐
│                 資料收集階段                          │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐     │
│  │ 關鍵字   │ →  │ Playwright│ →  │ 結構化   │     │
│  │ 規劃     │    │ 爬蟲     │    │ 資料     │     │
│  └──────────┘    └──────────┘    └──────────┘     │
│                        │                           │
│                        ▼                           │
│              ┌──────────────────┐                  │
│              │ 反偵測機制       │                  │
│              │ • WebGL 偽裝    │                  │
│              │ • 人類行為模擬  │                  │
│              │ • 隨機延遲      │                  │
│              └──────────────────┘                  │
│                                                     │
└─────────────────────────────────────────────────────┘
```

**技術細節**：
- 使用 Playwright MCP 進行瀏覽器自動化
- WebGL 指紋偽裝（Apple M1 Pro）
- 模擬人類滾動、點擊行為
- 隨機延遲避免封鎖

**收集數據**：
```json
{
  "keyword": "焦慮",
  "article_count": 12184,
  "followers": 0,
  "hot_articles": [...],
  "related_topics": [...],
  "related_boards": [...]
}
```

### 2.2 Phase 2：數據儲存

```
┌─────────────────────────────────────────────────────┐
│                 數據儲存階段                          │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐     │
│  │ 原始數據 │ →  │ Firebase │ →  │ 結構化   │     │
│  │          │    │ Firestore│    │ 查詢     │     │
│  └──────────┘    └──────────┘    └──────────┘     │
│                                                     │
│  Collections:                                       │
│  • dcard_research (7 keywords + 1 summary)         │
│  • dcard_research_articles (27 hot articles)       │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### 2.3 Phase 3：AI 分析與洞察

```
┌─────────────────────────────────────────────────────┐
│                 AI 分析階段                          │
├─────────────────────────────────────────────────────┤
│                                                     │
│  輸入：18,719 篇文章數據                            │
│        ↓                                           │
│  ┌──────────────────────────────────────────┐      │
│  │ LLM 分析任務                              │      │
│  │ 1. 痛點提取：職場壓力、經濟焦慮...        │      │
│  │ 2. 情緒分類：焦慮、疲憊、渴望療癒...      │      │
│  │ 3. 熱門話題：寵物、旅遊、躺平...          │      │
│  │ 4. 語言風格：年輕人用語、梗...            │      │
│  └──────────────────────────────────────────┘      │
│        ↓                                           │
│  輸出：結構化洞察報告                               │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### 2.4 Phase 4：文案生成

```
┌─────────────────────────────────────────────────────┐
│                 文案生成階段                          │
├─────────────────────────────────────────────────────┤
│                                                     │
│  輸入：                                             │
│  • 品牌資訊（充電小世界）                           │
│  • 核心訴求（手機有充電的地方，你呢？）             │
│  • 洞察報告                                         │
│        ↓                                           │
│  ┌──────────────────────────────────────────┐      │
│  │ LLM 生成任務                              │      │
│  │ • 定義語調風格                            │      │
│  │ • 規劃內容系列                            │      │
│  │ • 生成 100 篇文案                         │      │
│  │ • 配圖建議 / AI 繪圖 Prompt               │      │
│  └──────────────────────────────────────────┘      │
│        ↓                                           │
│  輸出：完整內容策略文件                             │
│                                                     │
└─────────────────────────────────────────────────────┘
```

---

## 3. 系統架構設計

### 3.1 整體架構圖

```
┌────────────────────────────────────────────────────────────────────┐
│                        MarketSense AI Platform                      │
├────────────────────────────────────────────────────────────────────┤
│                                                                    │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │                       Frontend (Next.js)                     │  │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │  │
│  │  │ 專案設定 │  │ 爬蟲監控 │  │ 數據分析 │  │ 文案輸出 │        │  │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘        │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                              │                                     │
│                              ▼                                     │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │                      Backend (Node.js)                       │  │
│  │                                                              │  │
│  │  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐   │  │
│  │  │ Crawler       │  │ Analysis      │  │ Content       │   │  │
│  │  │ Service       │  │ Service       │  │ Generator     │   │  │
│  │  │               │  │               │  │               │   │  │
│  │  │ • Playwright  │  │ • LLM API     │  │ • LLM API     │   │  │
│  │  │ • Anti-detect │  │ • Embeddings  │  │ • Templates   │   │  │
│  │  │ • Queue       │  │ • RAG         │  │ • Batch       │   │  │
│  │  └───────────────┘  └───────────────┘  └───────────────┘   │  │
│  │                              │                              │  │
│  └──────────────────────────────┼──────────────────────────────┘  │
│                                 │                                  │
│                                 ▼                                  │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │                     Data Layer                               │  │
│  │  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐   │  │
│  │  │ Firebase      │  │ Vector DB     │  │ Redis Cache   │   │  │
│  │  │ Firestore     │  │ (Pinecone)    │  │               │   │  │
│  │  └───────────────┘  └───────────────┘  └───────────────┘   │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                    │
└────────────────────────────────────────────────────────────────────┘
```

### 3.2 核心模組

| 模組 | 功能 | 技術 |
|------|------|------|
| **Crawler Service** | 多平台爬蟲 | Playwright, Puppeteer |
| **Analysis Service** | 數據分析、洞察提取 | OpenAI API, LangChain |
| **Content Generator** | 文案批量生成 | GPT-4, Claude |
| **Queue Manager** | 任務排程 | Bull, Redis |
| **Storage** | 數據持久化 | Firebase, PostgreSQL |

---

## 4. 自動化方案比較

### 4.1 方案一：純 LLM API 調用

```
┌──────────────────────────────────────────────┐
│           純 LLM API 方案                     │
├──────────────────────────────────────────────┤
│                                              │
│  User Input → API Call → LLM → Output        │
│                                              │
│  優點：                                       │
│  ✅ 實作簡單                                  │
│  ✅ 成本較低                                  │
│  ✅ 延遲較短                                  │
│                                              │
│  缺點：                                       │
│  ❌ 無法執行爬蟲                              │
│  ❌ 無法操作檔案系統                          │
│  ❌ 功能受限於 API                            │
│                                              │
│  適用場景：                                   │
│  • 純文案生成                                 │
│  • 已有數據的分析                             │
│                                              │
└──────────────────────────────────────────────┘
```

### 4.2 方案二：有 Copilot SDK 的 Agent 系統

```
┌──────────────────────────────────────────────┐
│         Copilot SDK Agent 方案                │
├──────────────────────────────────────────────┤
│                                              │
│  User Input → Supervisor Agent               │
│                    ↓                         │
│         ┌─────────┼─────────┐                │
│         ↓         ↓         ↓                │
│    Crawler    Analyst   Content              │
│    Agent      Agent     Agent                │
│         ↓         ↓         ↓                │
│         └─────────┼─────────┘                │
│                   ↓                          │
│              Final Output                    │
│                                              │
│  優點：                                       │
│  ✅ 可執行實際爬蟲操作                        │
│  ✅ 可讀寫檔案系統                            │
│  ✅ 多代理協作、並行處理                      │
│  ✅ 自主決策、錯誤處理                        │
│  ✅ 工具呼叫（bash、edit、view）              │
│                                              │
│  缺點：                                       │
│  ❌ 需要本地環境                              │
│  ❌ 資源消耗較大                              │
│  ❌ 部署複雜度較高                            │
│                                              │
│  適用場景：                                   │
│  • 完整自動化流程                             │
│  • 需要動態爬蟲                               │
│  • 複雜任務協調                               │
│                                              │
└──────────────────────────────────────────────┘
```

### 4.3 功能對比表

| 功能 | 純 LLM API | Copilot SDK Agent |
|------|:----------:|:-----------------:|
| 文案生成 | ✅ | ✅ |
| 數據分析 | ✅ | ✅ |
| 動態爬蟲 | ❌ | ✅ |
| 檔案操作 | ❌ | ✅ |
| 執行程式碼 | ❌ | ✅ |
| 多代理協作 | ❌ | ✅ |
| 自主錯誤處理 | ❌ | ✅ |
| 本地部署需求 | 不需要 | 需要 |
| API 成本 | 中 | 高 |
| 開發複雜度 | 低 | 高 |

### 4.4 混合方案（推薦）

```
┌──────────────────────────────────────────────────────────┐
│                   混合架構方案                            │
├──────────────────────────────────────────────────────────┤
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │                 Cloud Layer (SaaS)                  │ │
│  │                                                     │ │
│  │  • 前端界面                                         │ │
│  │  • 任務管理                                         │ │
│  │  • 簡單 LLM 分析                                    │ │
│  │  • 文案生成（純 API）                               │ │
│  │                                                     │ │
│  └────────────────────────────────────────────────────┘ │
│                          │                               │
│                          ▼                               │
│  ┌────────────────────────────────────────────────────┐ │
│  │               Worker Layer (可選)                   │ │
│  │                                                     │ │
│  │  • Copilot SDK Agent（進階功能）                    │ │
│  │  • 本地爬蟲服務                                     │ │
│  │  • 複雜任務處理                                     │ │
│  │                                                     │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
│  使用場景：                                               │
│  • 基本用戶：Cloud Layer 即可滿足                         │
│  • 進階用戶：可選擇啟用 Worker Layer                      │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

---

## 5. 技術實現規劃

### 5.1 技術棧

```yaml
Frontend:
  - Framework: Next.js 14 (App Router)
  - UI: Tailwind CSS + shadcn/ui
  - State: Zustand
  - Forms: React Hook Form + Zod

Backend:
  - Runtime: Node.js 20
  - Framework: Express / Fastify
  - Queue: Bull (Redis-based)
  - Cache: Redis

AI/ML:
  - LLM: OpenAI GPT-4 / Claude 3
  - Embeddings: text-embedding-ada-002
  - Vector DB: Pinecone / Qdrant

Data:
  - Primary DB: Firebase Firestore
  - Analytics: PostgreSQL (optional)
  - Storage: Firebase Storage

Crawler:
  - Engine: Playwright
  - Anti-detection: playwright-stealth
  - Proxy: Rotating proxies (optional)

DevOps:
  - Hosting: Vercel (Frontend) + Railway (Backend)
  - CI/CD: GitHub Actions
  - Monitoring: Sentry
```

### 5.2 API 設計

```typescript
// POST /api/projects
// 建立新專案
{
  "name": "充電小世界",
  "description": "手機充電站行銷活動",
  "tagline": "手機有充電的地方，你呢？",
  "platforms": ["dcard", "ptt"],
  "keywords": ["焦慮", "療癒", "壓力大"]
}

// POST /api/projects/:id/crawl
// 啟動爬蟲
{
  "platform": "dcard",
  "keywords": ["焦慮", "療癒"],
  "maxArticles": 100
}

// GET /api/projects/:id/analysis
// 取得分析結果
{
  "insights": {...},
  "painPoints": [...],
  "trends": [...]
}

// POST /api/projects/:id/generate
// 生成文案
{
  "contentType": "instagram",
  "count": 100,
  "tone": "溫暖療癒",
  "series": ["電量警示", "療癒充電站"]
}
```

### 5.3 LLM Prompt 設計

#### 洞察分析 Prompt
```markdown
你是一位資深的社群數據分析師。請分析以下從 Dcard 收集的數據：

## 數據摘要
- 關鍵字：{keywords}
- 總文章數：{total_articles}
- 時間範圍：{date_range}

## 熱門文章樣本
{hot_articles}

## 分析任務
請提供：
1. **受眾痛點**（至少 5 個，按重要性排序）
2. **情緒分析**（主要情緒類型和佔比）
3. **熱門話題**（相關討論主題）
4. **語言風格**（年輕人常用的表達方式）
5. **行銷切入點**（基於以上分析的建議）

輸出格式：JSON
```

#### 文案生成 Prompt
```markdown
你是一位專業的社群內容創作者。請根據以下資訊生成 IG 貼文：

## 品牌資訊
- 品牌名稱：{brand_name}
- 核心訴求：{tagline}
- 語調風格：{tone}

## 受眾洞察
{insights}

## 生成要求
- 系列：{series_name}
- 數量：{count} 篇
- 每篇包含：
  - 完整文案（含 emoji）
  - Hashtag 建議
  - 圖片設計建議

輸出格式：JSON Array
```

---

## 6. 產品功能規劃

### 6.1 MVP 功能（Phase 1）

| 功能 | 描述 | 優先級 |
|------|------|--------|
| 專案建立 | 輸入品牌、關鍵字 | P0 |
| 手動數據輸入 | 上傳爬蟲數據 | P0 |
| AI 洞察分析 | 分析數據、提取洞察 | P0 |
| 文案生成 | 批量生成 IG 貼文 | P0 |
| 下載輸出 | Markdown / PDF | P0 |

### 6.2 進階功能（Phase 2）

| 功能 | 描述 | 優先級 |
|------|------|--------|
| 自動爬蟲 | 內建 Dcard/PTT 爬蟲 | P1 |
| 多平台支援 | FB、Twitter、小紅書 | P1 |
| 圖片生成 | 整合 DALL-E / Midjourney | P1 |
| 排程發布 | 串接 IG API 自動發文 | P1 |
| 團隊協作 | 多人編輯、審核流程 | P2 |

### 6.3 企業功能（Phase 3）

| 功能 | 描述 | 優先級 |
|------|------|--------|
| 品牌聲音訓練 | Fine-tune 專屬模型 | P2 |
| A/B 測試 | 文案效果追蹤 | P2 |
| API 開放 | 第三方整合 | P2 |
| 白標方案 | 客製化品牌 | P3 |

---

## 7. 商業模式

### 7.1 定價策略

| 方案 | 價格/月 | 功能 |
|------|---------|------|
| **Free** | $0 | 3 專案、50 篇文案/月 |
| **Pro** | $29 | 無限專案、500 篇文案/月、自動爬蟲 |
| **Business** | $99 | 團隊功能、API 存取、優先支援 |
| **Enterprise** | 洽談 | 客製化、專屬部署、SLA |

### 7.2 營收預估

```
Year 1 目標：
- Free 用戶：5,000
- Pro 用戶：500（轉換率 10%）
- 月收入：500 × $29 = $14,500
- 年收入：$174,000

Year 2 目標：
- Business 用戶：100
- 額外收入：100 × $99 = $9,900/月
- 年收入：$300,000+
```

---

## 8. 開發時程

### Phase 1：MVP（4 週）

| 週次 | 任務 |
|------|------|
| Week 1 | 後端 API + 資料庫設計 |
| Week 2 | 前端界面 + 專案管理 |
| Week 3 | LLM 整合 + 文案生成 |
| Week 4 | 測試 + 部署 + 優化 |

### Phase 2：爬蟲整合（2 週）

| 週次 | 任務 |
|------|------|
| Week 5 | Dcard 爬蟲服務 |
| Week 6 | PTT + 多平台支援 |

### Phase 3：進階功能（4 週）

| 週次 | 任務 |
|------|------|
| Week 7-8 | 圖片生成整合 |
| Week 9-10 | 團隊功能 + 付費系統 |

---

## 附錄

### A. 競品分析

| 競品 | 特點 | 差異化 |
|------|------|--------|
| Jasper | 純文案生成 | 我們有數據洞察 |
| Copy.ai | 模板導向 | 我們有自動爬蟲 |
| MarketMuse | SEO 導向 | 我們專注社群 |

### B. 風險評估

| 風險 | 影響 | 緩解措施 |
|------|------|----------|
| 爬蟲被封鎖 | 高 | 代理池、頻率控制 |
| API 成本超支 | 中 | 快取、批量處理 |
| 競品追趕 | 中 | 持續創新、社群經營 |

### C. 資源需求

| 資源 | 需求 |
|------|------|
| 開發人力 | 2-3 人 |
| 初期資金 | $10,000-20,000 |
| 時間 | 2-3 個月 MVP |

---

**文件版本**：v1.0  
**撰寫日期**：2026/01/25  
**下一步**：開始實作 Web 應用 Demo
